<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>AMR ⇄ PLC ⇄ 電動門 握手流程圖</title>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true });
  </script>
  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      margin: 40px;
      background-color: #f8f9fa;
    }
    h1 {
      color: #0b3d91;
    }
  </style>
</head>
<body>

<h1>AMR ⇄ PLC ⇄ 電動門 握手流程圖</h1>

<div class="mermaid">
sequenceDiagram
    participant AMR as AMR 無人搬運車
    participant PLC as PLC 控制器
    participant Door as 電動門

    Note over AMR,Door: t0 抵達門區安全點
    AMR->>PLC: OpenReq(jobId, doorId)
    PLC-->>AMR: Ack(reqId, eta≈2s)
    PLC->>Door: DoorOpen()
    Door-->>PLC: DoorStatus=OPEN
    PLC-->>AMR: PermitPass(timeout=5s)
    AMR->>Door: PassThrough()
    AMR-->>PLC: PassComplete()
    PLC->>Door: DoorClose()
    Door-->>PLC: DoorStatus=CLOSED
    PLC-->>AMR: SessionClose()
</div>

</body>
</html>
